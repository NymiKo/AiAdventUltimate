# Руководство пользователя AiAdvent Ultimate

## Введение

AiAdvent Ultimate - это мощный AI ассистент с поддержкой RAG, мультиагентной системы, MCP интеграций и голосового ввода/вывода. Это руководство поможет вам максимально эффективно использовать все возможности приложения.

## Быстрый старт

### Первая настройка

1. **Получите API ключ DeepSeek**:
   - Зарегистрируйтесь на [platform.deepseek.com](https://platform.deepseek.com/)
   - Создайте API ключ в разделе API Keys
   - Скопируйте ключ

2. **Настройте приложение**:
   - Откройте настройки (иконка шестеренки)
   - Введите API ключ DeepSeek
   - Сохраните настройки

3. **Начните использовать**:
   - Введите вопрос в поле ввода
   - Нажмите Enter или кнопку отправки
   - Получите ответ от AI

## Основные возможности

### 1. Чат с AI

Основной интерфейс приложения - это чат с AI ассистентом.

#### Базовое использование

- **Отправка сообщений**: Введите текст и нажмите Enter или кнопку отправки
- **История чатов**: Нажмите иконку чата в верхней панели для просмотра всех чатов
- **Очистка чата**: Нажмите иконку корзины для очистки текущего чата
- **Команды**: Начните вводить "/" для просмотра доступных команд

#### Команды

Приложение поддерживает команды (начните с "/"):
- `/help` - Показать справку
- `/clear` - Очистить чат
- `/rag` - Информация о RAG

### 2. RAG (Retrieval-Augmented Generation)

RAG позволяет AI использовать вашу документацию для более точных ответов.

#### Настройка RAG

**Шаг 1: Установка LM Studio**
1. Скачайте и установите [LM Studio](https://lmstudio.ai/)
2. Запустите LM Studio
3. Загрузите модель для эмбеддингов (рекомендуется модель с поддержкой эмбеддингов)
4. Запустите локальный сервер на порту 1234

**Шаг 2: Настройка в приложении**
1. Откройте настройки
2. Найдите раздел "RAG"
3. Укажите URL: `http://localhost:1234`
4. Настройте параметры (опционально):
   - **Top K**: Количество релевантных фрагментов (рекомендуется 8-12)
   - **Rerank Min Score**: Минимальный score для reranking (рекомендуется 0.55-0.65)

**Шаг 3: Создание индекса**
1. Перейдите в "Индекс эмбеддингов" (иконка хранилища в верхней панели)
2. Выберите модель для эмбеддингов (если доступно несколько)
3. Нажмите "Загрузить файлы"
4. Выберите документы (HTML, PDF, Markdown, TXT)
5. Дождитесь обработки файлов

**Шаг 4: Использование**
1. Включите RAG в настройках
2. Задайте вопрос в чате
3. AI автоматически найдет релевантную информацию в ваших документах

#### Рекомендации по использованию RAG

- **Качество документов**: Используйте структурированные, качественные документы
- **Размер файлов**: Избегайте очень больших файлов (более 10MB)
- **Количество документов**: Оптимально 50-100 документов для начала
- **Обновление индекса**: Регулярно обновляйте индекс при добавлении новых документов

### 3. Агенты

Агенты - это специализированные AI помощники с кастомными промптами.

#### Создание агента

1. Откройте боковую панель (иконка человека в верхней панели)
2. Нажмите кнопку "+" для создания нового агента
3. Заполните информацию:
   - **Имя**: Название агента (например, "Программист Kotlin")
   - **Описание**: Краткое описание роли агента
   - **Системный промпт**: Детальные инструкции для AI (опционально)
4. Сохраните агента

#### Примеры системных промптов

**Агент-программист**:
```
Ты опытный программист, специализирующийся на Kotlin и Android разработке. 
Помогаешь писать чистый, эффективный код. Всегда объясняешь решения и предлагаешь лучшие практики.
```

**Агент-аналитик**:
```
Ты бизнес-аналитик. Анализируешь данные, находишь закономерности и предоставляешь инсайты. 
Всегда структурируешь информацию и используешь визуализации где возможно.
```

**Агент-писатель**:
```
Ты профессиональный писатель. Помогаешь создавать качественные тексты, 
редактируешь и улучшаешь стиль. Всегда учитываешь целевую аудиторию.
```

#### Работа с несколькими агентами

1. **Выбор агентов**: Отметьте несколько агентов в боковой панели
2. **Координатор**: Включите координатор для автоматического распределения задач
3. **Прямая работа**: Выключите координатор для работы с выбранными агентами напрямую

#### Связи между агентами

Создайте связи для автоматической работы агентов друг с другом:

1. Нажмите иконку "Создать связь" (иконка Share) в боковой панели
2. Выберите исходного и целевого агента
3. Выберите тип связи:
   - **REVIEW**: Агент проверяет работу другого
   - **VALIDATE**: Агент валидирует результаты
   - **ENHANCE**: Агент улучшает результаты
   - **COLLABORATE**: Агенты работают совместно
4. Сохраните связь

### 4. MCP Серверы

MCP серверы позволяют интегрировать внешние сервисы с AI ассистентом.

#### Настройка GitHub MCP сервера

1. **Получение токена**:
   - Зайдите на GitHub → Settings → Developer settings → Personal access tokens
   - Создайте новый токен с правами: `repo`, `read:org`, `read:user`
   - Скопируйте токен

2. **Добавление сервера**:
   - Откройте боковую панель → вкладка "MCP Серверы"
   - Нажмите "+" для добавления нового сервера
   - Выберите GitHub MCP сервер (если доступен) или добавьте вручную
   - Укажите токен в параметрах
   - Включите сервер

3. **Использование**:
   - Откройте проект, подключенный к GitHub
   - AI сможет использовать информацию о репозитории, ветках, PR

#### Работа с Pull Requests

1. Откройте боковую панель → вкладка "Pull Requests"
2. Вы увидите список открытых PR
3. Нажмите "Review" для автоматического анализа PR
4. AI проанализирует изменения и добавит комментарий

### 5. Голосовой ввод/вывод (Desktop)

#### Настройка голосового ввода

1. **Требования**:
   - Desktop версия приложения (JVM)
   - Микрофон подключен и работает
   - Yandex Cloud API ключи настроены

2. **Настройка Yandex Cloud**:
   - Создайте аккаунт в [Yandex Cloud](https://console.cloud.yandex.ru/)
   - Создайте облако и сервисный аккаунт
   - Назначьте роль `ai.speechkit-stt.user`
   - Создайте API ключ
   - Добавьте ключ и Folder ID в `.env` файл или настройки

3. **Использование**:
   - Нажмите иконку микрофона в поле ввода
   - Говорите в микрофон
   - Нажмите красную кнопку для остановки
   - Текст появится в поле ввода автоматически

#### Настройка голосового вывода

1. **Настройка Yandex Cloud**:
   - Создайте сервисный аккаунт с ролью `ai.speechkit-tts.user`
   - Получите API ключ и Folder ID
   - Добавьте в настройки

2. **Включение**:
   - Откройте настройки
   - Включите "Голосовой вывод"
   - Ответы AI будут автоматически озвучиваться

### 6. Работа с проектами

#### Открытие проекта

1. Нажмите на название проекта в верхней панели (или "AiAdvent Ultimate")
2. Выберите "Открыть проект"
3. Укажите путь к папке проекта
4. Проект откроется автоматически

#### Интеграция с GitHub

При открытии проекта, подключенного к GitHub:
- Автоматически определяется репозиторий
- Показывается текущая ветка в верхней панели
- Доступны Pull Requests через боковую панель
- AI может использовать контекст проекта в ответах

#### Работа с ветками

1. Нажмите на название ветки в верхней панели
2. Выберите нужную ветку из списка
3. AI будет использовать информацию о выбранной ветке

### 7. Поддержка

#### Использование поддержки

1. Откройте боковую панель → вкладка "Поддержка"
2. Задайте вопрос о приложении
3. AI найдет ответ в документации и FAQ
4. Если нужно, переключитесь на "Документация" для загрузки дополнительных материалов

#### Загрузка документации для поддержки

1. Переключитесь на "Документация" в поддержке
2. Загрузите файлы с документацией (HTML, PDF, Markdown, TXT)
3. Документация будет использоваться только для ответов в поддержке
4. Это отдельный индекс от основного RAG

## Настройки

### Основные настройки

- **DeepSeek API Key**: Ключ для работы с DeepSeek API (обязательно)
- **Темная тема**: Переключение между светлой и темной темой
- **RAG**: Включение/выключение RAG
- **Голосовой ввод**: Включение/выключение распознавания речи (Desktop)
- **Голосовой вывод**: Включение/выключение синтеза речи (Desktop)

### Настройки RAG

- **LMStudio URL**: Адрес локального LMStudio сервера (по умолчанию `http://localhost:1234`)
- **Top K**: Количество релевантных чанков для поиска (рекомендуется 8-12)
- **Rerank Min Score**: Минимальный score для reranking (рекомендуется 0.55-0.65)
- **Reranked Retention Ratio**: Доля чанков, оставляемых после reranking (рекомендуется 0.5-0.7)

### Настройки модели

- **Temperature**: Контролирует случайность ответов
  - Низкие значения (0.1-0.3): более точные, детерминированные ответы
  - Высокие значения (0.7-1.0): более творческие, разнообразные ответы
- **Max Tokens**: Максимальная длина ответа
  - Меньшие значения: более короткие ответы, быстрее
  - Большие значения: более длинные ответы, медленнее

## Советы и лучшие практики

### Оптимизация работы с RAG

1. **Структурируйте документы**: Используйте четкие заголовки, списки, структурированный контент
2. **Актуальность**: Регулярно обновляйте индекс при изменении документации
3. **Качество важнее количества**: Лучше меньше качественных документов, чем много плохих
4. **Тестируйте параметры**: Экспериментируйте с topK и rerankMinScore для ваших документов

### Работа с агентами

1. **Специализация**: Создавайте узкоспециализированных агентов для конкретных задач
2. **Промпты**: Четко формулируйте системные промпты для лучших результатов
3. **Координатор**: Используйте координатор для сложных задач, требующих нескольких экспертов
4. **Связи**: Настраивайте связи между агентами для автоматизации рабочих процессов

### Эффективное использование чата

1. **Контекст**: Чем больше контекста вы даете, тем лучше ответ
2. **Структура**: Используйте списки, заголовки для структурирования вопросов
3. **Итерации**: Не бойтесь уточнять и задавать дополнительные вопросы
4. **История**: Используйте историю чатов для продолжения предыдущих разговоров

### Производительность

1. **Интернет**: Стабильное интернет-соединение критично для работы
2. **LM Studio**: Для RAG используйте локальный LM Studio для лучшей производительности
3. **Количество агентов**: Не выбирайте слишком много агентов одновременно
4. **Размер индекса**: Большие индексы замедляют поиск, оптимизируйте количество документов

## Решение проблем

### Приложение не отвечает

1. Проверьте интернет-соединение
2. Убедитесь, что API ключ действителен
3. Проверьте баланс на аккаунте DeepSeek
4. Перезапустите приложение

### RAG не работает

1. Убедитесь, что LM Studio запущен
2. Проверьте URL в настройках
3. Убедитесь, что индекс создан и содержит данные
4. Проверьте, что RAG включен в настройках

### Агенты не отвечают

1. Проверьте, что агенты выбраны
2. Убедитесь, что API ключ настроен
3. Проверьте системные промпты агентов
4. Попробуйте пересоздать агента

### Голосовые функции не работают

1. Убедитесь, что вы используете Desktop версию
2. Проверьте настройки Yandex Cloud API
3. Убедитесь, что микрофон/динамики работают
4. Проверьте права доступа в системе

## Дополнительные ресурсы

### Документация

- **FAQ**: Часто задаваемые вопросы и ответы
- **API документация**: Подробная информация об API
- **Примеры использования**: Практические примеры

### Поддержка

- Используйте вкладку "Поддержка" в приложении
- Проверьте FAQ перед обращением
- Создайте тикет для сложных проблем

## Заключение

AiAdvent Ultimate - это мощный инструмент для работы с AI. Используйте это руководство как отправную точку, экспериментируйте с настройками и функциями, чтобы найти оптимальный способ работы для ваших задач.

Удачной работы!
